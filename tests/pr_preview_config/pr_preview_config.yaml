name: pr_preview_config

services:
  postgres:
    port: 3456
  chat_app:
    pipeline: CMSCompOpsAgent
    port: 2786
    external_port: 2786
    trained_on: "Dummy data for preview"
  chromadb:
    host: chromadb
    port: 8123
    external_port: 8123
  data_manager:
    port: 4242
    external_port: 4242
    auth:
      enabled: false

data_manager:
  embedding_name: HuggingFaceEmbeddings
  embedding_class_map:
    HuggingFaceEmbeddings:
      class: HuggingFaceEmbeddings
      kwargs:
        model_name: sentence-transformers/all-MiniLM-L6-v2
        model_kwargs:
          device: cpu
        encode_kwargs:
          normalize_embeddings: true
      similarity_score_reference: 10
  chromadb_host: localhost  
  use_hybrid_search: true
  sources:
    links:
      enabled: false
    local_files:
      paths:
        - tests/smoke/seed.txt

a2rchi:
  pipelines: ['CMSCompOpsAgent']
  pipeline_map:
    CMSCompOpsAgent:
      prompts:
        required:
          agent_prompt: tests/pr_preview_config/agent.prompt
      models:
        required:
          agent_model: OllamaInterface
  model_class_map:
    OllamaInterface:
      kwargs:
        base_model: "gemma3:latest"
        url: "http://localhost:7870"
